<div class="container">
    <h1>Dashboard</h1>
  
    <!-- Stats Grid -->
    <div class="stats-grid">
      <mat-card>
        <mat-card-content>
          <div class="stat-content">
            <mat-icon color="primary">assignment</mat-icon>
            <div>
              <h2>{{ stats.totalTasks }}</h2>
              <p>Total Tasks</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
  
      <mat-card>
        <mat-card-content>
          <div class="stat-content">
            <mat-icon color="accent">pending_actions</mat-icon>
            <div>
              <h2>{{ stats.pendingTasks }}</h2>
              <p>Pending Tasks</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
  
      <mat-card>
        <mat-card-content>
          <div class="stat-content">
            <mat-icon color="warn">people</mat-icon>
            <div>
              <h2>{{ stats.totalMembers }}</h2>
              <p>Total Members</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
  
      <mat-card>
        <mat-card-content>
          <div class="stat-content">
            <mat-icon style="color: #4caf50;">check_circle</mat-icon>
            <div>
              <h2>{{ stats.completedToday }}</h2>
              <p>Completed Today</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  
    <!-- Tasks List -->
    <mat-card class="tasks-card">
      <mat-card-header>
        <mat-card-title>Active Tasks</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="tasks-list" *ngIf="tasks.length > 0; else noTasks">
          <mat-card *ngFor="let task of tasks" class="task-item">
            <mat-card-content>
              <div class="task-header">
                <h3>{{ task.taskName }}</h3>
                <mat-chip [color]="task.currentStatus === 'Completed' ? 'accent' : 
                                   task.currentStatus === 'PendingApproval' ? 'warn' : 
                                   'primary'" selected>
                  {{ task.currentStatus || 'Ready' }}
                </mat-chip>
              </div>
  
              <p class="task-description" *ngIf="task.description">
                {{ task.description }}
              </p>
  
              <div class="task-info">
                <mat-icon>person</mat-icon>
                <span>
                  <strong>Current Turn:</strong> 
                  {{ task.currentAssignedTo || 'Not assigned yet' }}
                </span>
              </div>
  
              <div class="task-actions">
                <!-- Trigger Button -->
                <button mat-raised-button color="primary" 
                        (click)="triggerTask(task)"
                        [disabled]="!task.canTrigger">
                  <mat-icon>play_arrow</mat-icon>
                  <span class="hide-mobile">Trigger Task</span>
                  <span class="show-mobile">Trigger</span>
                </button>
  
                <!-- Complete Button -->
                <button mat-raised-button color="accent" 
                        (click)="completeTask(task)"
                        *ngIf="task.currentAssignedTo === currentUser?.fullName && task.currentStatus === 'InProgress'">
                  <mat-icon>check</mat-icon>
                  <span class="hide-mobile">Mark Complete</span>
                  <span class="show-mobile">Complete</span>
                </button>
  
                <!-- Approve Button -->
                <button mat-raised-button color="primary" 
                        (click)="approveTask(task)"
                        *ngIf="task.currentStatus === 'PendingApproval' && canApprove(task)">
                  <mat-icon>check_circle</mat-icon>
                  <span>Approve</span>
                </button>
  
                <!-- Reject Button -->
                <button mat-raised-button color="warn" 
                        (click)="rejectTask(task)"
                        *ngIf="task.currentStatus === 'PendingApproval' && canApprove(task)">
                  <mat-icon>cancel</mat-icon>
                  <span>Reject</span>
                </button>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
  
        <ng-template #noTasks>
          <div class="no-data">
            <mat-icon>inbox</mat-icon>
            <p>No active tasks. Create your first task!</p>
          </div>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>
  